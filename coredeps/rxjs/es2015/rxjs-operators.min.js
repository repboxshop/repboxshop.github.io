/* rxjs@6.6.3 */
System.register(["./rxjs-shared.min.js","./rxjs-shared.min3.js","./rxjs-shared.min2.js","./rxjs-shared.min4.js","./rxjs-shared.min8.js","./rxjs-shared.min7.js","./rxjs-shared.min6.js"],(function(t){"use strict";var e,s,i,n,r,o,c,h,u,l,a,d,f,b,p,x,w,m,_,y,S,g,v,N,C,T,V,I,E,j,O,W,k,A,B,z,F,P,R,D,M,q,Y;return{setters:[function(t){e=t.e,s=t.S,i=t.i,n=t.O,r=t.d,o=t.p,c=t.b},function(t){h=t.i,u=t.N,l=t.e,a=t.o,d=t.S,f=t.t},function(e){b=e.S,p=e.l,x=e.o,w=e.a,m=e.t,_=e.O,y=e.s,S=e.p,g=e.k,v=e.q,N=e.E,C=e.h,T=e.f,V=e.m,I=e.u,E=e.b,j=e.B,O=e.A,W=e.r,k=e.v,A=e.c,B=e.i,z=e.n,F=e.d,P=e.T,R=e.z,D=e.Z;var s={};s.concatAll=e.w,s.filter=e.f,s.flatMap=e.D,s.groupBy=e.x,s.mergeAll=e.y,s.mergeMap=e.q,s.refCount=e.v,t(s)},function(e){M=e.R,t("observeOn",e.o)},function(){},function(e){q=e.m,t("map",e.m)},function(t){Y=t.f}],execute:function(){function K(t){return function(e){return e.lift(new L(t))}}t({audit:K,auditTime:function(t,e=w){return K(()=>m(t,e))},buffer:function(t){return function(e){return e.lift(new Z(t))}},bufferCount:function(t,e=null){return function(s){return s.lift(new H(t,e))}},bufferTime:function(t){let e=arguments.length,s=w;h(arguments[arguments.length-1])&&(s=arguments[arguments.length-1],e--);let i=null;e>=2&&(i=arguments[1]);let n=Number.POSITIVE_INFINITY;e>=3&&(n=arguments[2]);return function(e){return e.lift(new X(t,i,n,s))}},bufferToggle:function(t,e){return function(s){return s.lift(new nt(t,e))}},bufferWhen:function(t){return function(e){return e.lift(new ot(t))}},catchError:function(t){return function(e){const s=new ht(t),i=e.lift(s);return s.caught=i}},combineAll:function(t){return e=>e.lift(new S(t))},combineLatest:function(...t){let e=null;"function"==typeof t[t.length-1]&&(e=t.pop());1===t.length&&i(t[0])&&(t=t[0].slice());return s=>s.lift.call(Y([s,...t]),new S(e))},concat:function(...t){return e=>e.lift.call(g(e,...t))},concatMap:lt,concatMapTo:function(t,e){return lt(()=>t,e)},count:function(t){return e=>e.lift(new at(t,e))},debounce:function(t){return e=>e.lift(new ft(t))},debounceTime:function(t,e=w){return s=>s.lift(new pt(t,e))},defaultIfEmpty:mt,delay:function(t,e=w){const s=St(t)?+t-e.now():Math.abs(t);return t=>t.lift(new gt(s,e))},delayWhen:function(t,e){if(e)return s=>new Vt(s,e).lift(new Ct(t));return e=>e.lift(new Ct(t))},dematerialize:function(){return function(t){return t.lift(new Et)}},distinct:function(t,e){return s=>s.lift(new Ot(t,e))},distinctUntilChanged:kt,distinctUntilKeyChanged:function(t,e){return kt((s,i)=>e?e(s[t],i[t]):s[t]===i[t])},elementAt:function(t,e){if(t<0)throw new C;const s=arguments.length>=2;return i=>i.pipe(T((e,s)=>s===t),Dt(1),s?mt(e):zt(()=>new C))},endWith:function(...t){return e=>g(e,a(...t))},every:function(t,e){return s=>s.lift(new Yt(t,e,s))},exhaust:function(){return t=>t.lift(new Lt)},exhaustMap:function t(e,s){if(s)return i=>i.pipe(t((t,i)=>Y(e(t,i)).pipe(q((e,n)=>s(t,e,i,n)))));return t=>t.lift(new Zt(e))},expand:function(t,e=Number.POSITIVE_INFINITY,s){return e=(e||0)<1?Number.POSITIVE_INFINITY:e,i=>i.lift(new Ht(t,e,s))},finalize:function(t){return e=>e.lift(new Qt(t))},find:function(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return s=>s.lift(new $t(t,s,!1,e))},findIndex:function(t,e){return s=>s.lift(new $t(t,s,!0,e))},first:function(t,e){const s=arguments.length>=2;return i=>i.pipe(t?T((e,s)=>t(e,s,i)):r,Dt(1),s?mt(e):zt(()=>new N))},ignoreElements:function(){return function(t){return t.lift(new ee)}},isEmpty:function(){return t=>t.lift(new ie)},last:function(t,e){const s=arguments.length>=2;return i=>i.pipe(t?T((e,s)=>t(e,s,i)):r,re(1),s?mt(e):zt(()=>new N))},mapTo:function(t){return e=>e.lift(new he(t))},materialize:function(){return function(t){return t.lift(new le)}},max:function(t){return pe("function"==typeof t?(e,s)=>t(e,s)>0?e:s:(t,e)=>t>e?t:e)},merge:function(...t){return e=>e.lift.call(V(e,...t))},mergeMapTo:function(t,e,s=Number.POSITIVE_INFINITY){if("function"==typeof e)return v(()=>t,e,s);"number"==typeof e&&(s=e);return v(()=>t,s)},mergeScan:function(t,e,s=Number.POSITIVE_INFINITY){return i=>i.lift(new xe(t,e,s))},min:function(t){return pe("function"==typeof t?(e,s)=>t(e,s)<0?e:s:(t,e)=>t<e?t:e)},multicast:me,onErrorResumeNext:function(...t){1===t.length&&i(t[0])&&(t=t[0]);return e=>e.lift(new ye(t))},pairwise:function(){return t=>t.lift(new ge)},partition:function(t,e){return s=>[T(t,e)(s),T(E(t,e))(s)]},pluck:function(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return s=>q(function(t,e){return s=>{let i=s;for(let s=0;s<e;s++){const e=null!=i?i[t[s]]:void 0;if(void 0===e)return;i=e}return i}}(t,e))(s)},publish:function(t){return t?me(()=>new d,t):me(new d)},publishBehavior:function(t){return e=>me(new j(t))(e)},publishLast:function(){return t=>me(new O)(t)},publishReplay:function(t,e,s,i){s&&"function"!=typeof s&&(i=s);const n="function"==typeof s?s:void 0,r=new M(t,e,i);return t=>me(()=>r,n)(t)},race:function(...t){return function(e){return 1===t.length&&i(t[0])&&(t=t[0]),e.lift.call(W(e,...t))}},reduce:pe,repeat:function(t=-1){return e=>0===t?l():t<0?e.lift(new Ne(-1,e)):e.lift(new Ne(t-1,e))},repeatWhen:function(t){return e=>e.lift(new Te(t))},retry:function(t=-1){return e=>e.lift(new Ie(t,e))},retryWhen:function(t){return e=>e.lift(new je(t,e))},sample:function(t){return e=>e.lift(new We(t))},sampleTime:function(t,e=w){return s=>s.lift(new Ae(t,e))},scan:de,sequenceEqual:function(t,e){return s=>s.lift(new Fe(t,e))},share:function(){return t=>k()(me(De)(t))},shareReplay:function(t,e,s){let i;i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:s};return t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:s,scheduler:i}){let n,r,o=0,c=!1,h=!1;return function(u){let l;o++,!n||c?(c=!1,n=new M(t,e,i),l=n.subscribe(this),r=u.subscribe({next(t){n.next(t)},error(t){c=!0,n.error(t)},complete(){h=!0,r=void 0,n.complete()}})):l=n.subscribe(this),this.add(()=>{o--,l.unsubscribe(),r&&!h&&s&&0===o&&(r.unsubscribe(),r=void 0,n=void 0)})}}(i))},single:function(t){return e=>e.lift(new Me(t,e))},skip:function(t){return e=>e.lift(new Ye(t))},skipLast:function(t){return e=>e.lift(new Le(t))},skipUntil:function(t){return e=>e.lift(new Ze(t))},skipWhile:function(t){return e=>e.lift(new He(t))},startWith:function(...t){const e=t[t.length-1];return h(e)?(t.pop(),s=>g(t,s,e)):e=>g(t,e)},subscribeOn:function(t,e=0){return function(s){return s.lift(new Xe(t,e))}},switchAll:function(){return $e(r)},switchMap:$e,switchMapTo:function(t,e){return e?$e(()=>t,e):$e(()=>t)},take:Dt,takeLast:re,takeUntil:function(t){return e=>e.lift(new ss(t))},takeWhile:function(t,e=!1){return s=>s.lift(new ns(t,e))},tap:function(t,e,s){return function(i){return i.lift(new os(t,e,s))}},throttle:function(t,e=hs){return s=>s.lift(new us(t,!!e.leading,!!e.trailing))},throttleTime:function(t,e=w,s=hs){return i=>i.lift(new as(t,e,s.leading,s.trailing))},throwIfEmpty:zt,timeInterval:function(t=w){return e=>F(()=>e.pipe(de(({current:e},s)=>({value:s,current:t.now(),last:e}),{current:t.now(),value:void 0,last:void 0}),q(({current:t,last:e,value:s})=>new bs(s,t-e))))},timeout:function(t,e=w){return ps(t,f(new P),e)},timeoutWith:ps,timestamp:function(t=w){return q(e=>new ms(e,t.now()))},toArray:function(){return pe(_s,[])},window:function(t){return function(e){return e.lift(new ys(t))}},windowCount:function(t,e=0){return function(s){return s.lift(new gs(t,e))}},windowTime:function(t){let e=w,s=null,i=Number.POSITIVE_INFINITY;h(arguments[3])&&(e=arguments[3]);h(arguments[2])?e=arguments[2]:B(arguments[2])&&(i=Number(arguments[2]));h(arguments[1])?e=arguments[1]:B(arguments[1])&&(s=Number(arguments[1]));return function(n){return n.lift(new Ns(t,s,i,e))}},windowToggle:function(t,e){return s=>s.lift(new js(t,e))},windowWhen:function(t){return function(e){return e.lift(new Ws(t))}},withLatestFrom:function(...t){return e=>{let s;"function"==typeof t[t.length-1]&&(s=t.pop());const i=t;return e.lift(new As(i,s))}},zip:function(...t){return function(e){return e.lift.call(R(e,...t))}},zipAll:function(t){return e=>e.lift(new D(t))}});class L{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new U(t,this.durationSelector))}}class U extends b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:s}=this;e=s(t)}catch(t){return this.destination.error(t)}const s=p(e,new x(this));!s||s.closed?this.clearThrottle():this.add(this.throttled=s)}}clearThrottle(){const{value:t,hasValue:e,throttled:s}=this;s&&(this.remove(s),this.throttled=void 0,s.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}class Z{constructor(t){this.closingNotifier=t}call(t,e){return e.subscribe(new G(t,this.closingNotifier))}}class G extends b{constructor(t,e){super(t),this.buffer=[],this.add(p(e,new x(this)))}_next(t){this.buffer.push(t)}notifyNext(){const t=this.buffer;this.buffer=[],this.destination.next(t)}}class H{constructor(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?Q:J}call(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))}}class J extends e{constructor(t,e){super(t),this.bufferSize=e,this.buffer=[]}_next(t){const e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])}_complete(){const t=this.buffer;t.length>0&&this.destination.next(t),super._complete()}}class Q extends e{constructor(t,e,s){super(t),this.bufferSize=e,this.startBufferEvery=s,this.buffers=[],this.count=0}_next(t){const{bufferSize:e,startBufferEvery:s,buffers:i,count:n}=this;this.count++,n%s==0&&i.push([]);for(let s=i.length;s--;){const n=i[s];n.push(t),n.length===e&&(i.splice(s,1),this.destination.next(n))}}_complete(){const{buffers:t,destination:e}=this;for(;t.length>0;){let s=t.shift();s.length>0&&e.next(s)}super._complete()}}class X{constructor(t,e,s,i){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=s,this.scheduler=i}call(t,e){return e.subscribe(new tt(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}class ${constructor(){this.buffer=[]}}class tt extends e{constructor(t,e,s,i,n){super(t),this.bufferTimeSpan=e,this.bufferCreationInterval=s,this.maxBufferSize=i,this.scheduler=n,this.contexts=[];const r=this.openContext();if(this.timespanOnly=null==s||s<0,this.timespanOnly){const t={subscriber:this,context:r,bufferTimeSpan:e};this.add(r.closeAction=n.schedule(et,e,t))}else{const t={subscriber:this,context:r},i={bufferTimeSpan:e,bufferCreationInterval:s,subscriber:this,scheduler:n};this.add(r.closeAction=n.schedule(it,e,t)),this.add(n.schedule(st,s,i))}}_next(t){const e=this.contexts,s=e.length;let i;for(let n=0;n<s;n++){const s=e[n],r=s.buffer;r.push(t),r.length==this.maxBufferSize&&(i=s)}i&&this.onBufferFull(i)}_error(t){this.contexts.length=0,super._error(t)}_complete(){const{contexts:t,destination:e}=this;for(;t.length>0;){const s=t.shift();e.next(s.buffer)}super._complete()}_unsubscribe(){this.contexts=null}onBufferFull(t){this.closeContext(t);const e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();const e=this.bufferTimeSpan,s={subscriber:this,context:t,bufferTimeSpan:e};this.add(t.closeAction=this.scheduler.schedule(et,e,s))}}openContext(){const t=new $;return this.contexts.push(t),t}closeContext(t){this.destination.next(t.buffer);const e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)}}function et(t){const e=t.subscriber,s=t.context;s&&e.closeContext(s),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function st(t){const{bufferCreationInterval:e,bufferTimeSpan:s,subscriber:i,scheduler:n}=t,r=i.openContext(),o=this;i.closed||(i.add(r.closeAction=n.schedule(it,s,{subscriber:i,context:r})),o.schedule(t,e))}function it(t){const{subscriber:e,context:s}=t;e.closeContext(s)}class nt{constructor(t,e){this.openings=t,this.closingSelector=e}call(t,e){return e.subscribe(new rt(t,this.openings,this.closingSelector))}}class rt extends _{constructor(t,e,s){super(t),this.closingSelector=s,this.contexts=[],this.add(y(this,e))}_next(t){const e=this.contexts,s=e.length;for(let i=0;i<s;i++)e[i].buffer.push(t)}_error(t){const e=this.contexts;for(;e.length>0;){const t=e.shift();t.subscription.unsubscribe(),t.buffer=null,t.subscription=null}this.contexts=null,super._error(t)}_complete(){const t=this.contexts;for(;t.length>0;){const e=t.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,super._complete()}notifyNext(t,e){t?this.closeBuffer(t):this.openBuffer(e)}notifyComplete(t){this.closeBuffer(t.context)}openBuffer(t){try{const e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}}closeBuffer(t){const e=this.contexts;if(e&&t){const{buffer:s,subscription:i}=t;this.destination.next(s),e.splice(e.indexOf(t),1),this.remove(i),i.unsubscribe()}}trySubscribe(t){const e=this.contexts,i=new s,n={buffer:[],subscription:i};e.push(n);const r=y(this,t,n);!r||r.closed?this.closeBuffer(n):(r.context=n,this.add(r),i.add(r))}}class ot{constructor(t){this.closingSelector=t}call(t,e){return e.subscribe(new ct(t,this.closingSelector))}}class ct extends b{constructor(t,e){super(t),this.closingSelector=e,this.subscribing=!1,this.openBuffer()}_next(t){this.buffer.push(t)}_complete(){const t=this.buffer;t&&this.destination.next(t),super._complete()}_unsubscribe(){this.buffer=void 0,this.subscribing=!1}notifyNext(){this.openBuffer()}notifyComplete(){this.subscribing?this.complete():this.openBuffer()}openBuffer(){let{closingSubscription:t}=this;t&&(this.remove(t),t.unsubscribe());const e=this.buffer;let i;this.buffer&&this.destination.next(e),this.buffer=[];try{const{closingSelector:t}=this;i=t()}catch(t){return this.error(t)}t=new s,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(p(i,new x(this))),this.subscribing=!1}}class ht{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ut(t,this.selector,this.caught))}}class ut extends b{constructor(t,e,s){super(t),this.selector=e,this.caught=s}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const s=new x(this);this.add(s);const i=p(e,s);i!==s&&this.add(i)}}}function lt(t,e){return v(t,e,1)}class at{constructor(t,e){this.predicate=t,this.source=e}call(t,e){return e.subscribe(new dt(t,this.predicate,this.source))}}class dt extends e{constructor(t,e,s){super(t),this.predicate=e,this.source=s,this.count=0,this.index=0}_next(t){this.predicate?this._tryPredicate(t):this.count++}_tryPredicate(t){let e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++}_complete(){this.destination.next(this.count),this.destination.complete()}}class ft{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new bt(t,this.durationSelector))}}class bt extends b{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){try{const e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}}_complete(){this.emitValue(),this.destination.complete()}_tryNext(t,e){let s=this.durationSubscription;this.value=t,this.hasValue=!0,s&&(s.unsubscribe(),this.remove(s)),s=p(e,new x(this)),s&&!s.closed&&this.add(this.durationSubscription=s)}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){if(this.hasValue){const t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=void 0,e.unsubscribe(),this.remove(e)),this.value=void 0,this.hasValue=!1,super._next(t)}}}class pt{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new xt(t,this.dueTime,this.scheduler))}}class xt extends e{constructor(t,e,s){super(t),this.dueTime=e,this.scheduler=s,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(wt,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function wt(t){t.debouncedNext()}function mt(t=null){return e=>e.lift(new _t(t))}class _t{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new yt(t,this.defaultValue))}}class yt extends e{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function St(t){return t instanceof Date&&!isNaN(+t)}class gt{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new vt(t,this.delay,this.scheduler))}}class vt extends e{constructor(t,e,s){super(t),this.delay=e,this.scheduler=s,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,s=e.queue,i=t.scheduler,n=t.destination;for(;s.length>0&&s[0].time-i.now()<=0;)s.shift().notification.observe(n);if(s.length>0){const e=Math.max(0,s[0].time-i.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(vt.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,s=new Nt(e.now()+this.delay,t);this.queue.push(s),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(u.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(u.createComplete()),this.unsubscribe()}}class Nt{constructor(t,e){this.time=t,this.notification=e}}class Ct{constructor(t){this.delayDurationSelector=t}call(t,e){return e.subscribe(new Tt(t,this.delayDurationSelector))}}class Tt extends _{constructor(t,e){super(t),this.delayDurationSelector=e,this.completed=!1,this.delayNotifierSubscriptions=[],this.index=0}notifyNext(t,e,s,i,n){this.destination.next(t),this.removeSubscription(n),this.tryComplete()}notifyError(t,e){this._error(t)}notifyComplete(t){const e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()}_next(t){const e=this.index++;try{const s=this.delayDurationSelector(t,e);s&&this.tryDelay(s,t)}catch(t){this.destination.error(t)}}_complete(){this.completed=!0,this.tryComplete(),this.unsubscribe()}removeSubscription(t){t.unsubscribe();const e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue}tryDelay(t,e){const s=y(this,t,e);if(s&&!s.closed){this.destination.add(s),this.delayNotifierSubscriptions.push(s)}}tryComplete(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}class Vt extends n{constructor(t,e){super(),this.source=t,this.subscriptionDelay=e}_subscribe(t){this.subscriptionDelay.subscribe(new It(t,this.source))}}class It extends e{constructor(t,e){super(),this.parent=t,this.source=e,this.sourceSubscribed=!1}_next(t){this.subscribeToSource()}_error(t){this.unsubscribe(),this.parent.error(t)}_complete(){this.unsubscribe(),this.subscribeToSource()}subscribeToSource(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}class Et{call(t,e){return e.subscribe(new jt(t))}}class jt extends e{constructor(t){super(t)}_next(t){t.observe(this.destination)}}class Ot{constructor(t,e){this.keySelector=t,this.flushes=e}call(t,e){return e.subscribe(new Wt(t,this.keySelector,this.flushes))}}class Wt extends b{constructor(t,e,s){super(t),this.keySelector=e,this.values=new Set,s&&this.add(p(s,new x(this)))}notifyNext(){this.values.clear()}notifyError(t){this._error(t)}_next(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)}_useKeySelector(t){let e;const{destination:s}=this;try{e=this.keySelector(t)}catch(t){return void s.error(t)}this._finalizeNext(e,t)}_finalizeNext(t,e){const{values:s}=this;s.has(t)||(s.add(t),this.destination.next(e))}}function kt(t,e){return s=>s.lift(new At(t,e))}class At{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Bt(t,this.compare,this.keySelector))}}class Bt extends e{constructor(t,e,s){super(t),this.keySelector=s,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:s}=this;e=s?s(t):t}catch(t){return this.destination.error(t)}let s=!1;if(this.hasKey)try{const{compare:t}=this;s=t(this.key,e)}catch(t){return this.destination.error(t)}else this.hasKey=!0;s||(this.key=e,this.destination.next(t))}}function zt(t=Rt){return e=>e.lift(new Ft(t))}class Ft{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Pt(t,this.errorFactory))}}class Pt extends e{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function Rt(){return new N}function Dt(t){return e=>0===t?l():e.lift(new Mt(t))}class Mt{constructor(t){if(this.total=t,this.total<0)throw new C}call(t,e){return e.subscribe(new qt(t,this.total))}}class qt extends e{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,s=++this.count;s<=e&&(this.destination.next(t),s===e&&(this.destination.complete(),this.unsubscribe()))}}class Yt{constructor(t,e,s){this.predicate=t,this.thisArg=e,this.source=s}call(t,e){return e.subscribe(new Kt(t,this.predicate,this.thisArg,this.source))}}class Kt extends e{constructor(t,e,s,i){super(t),this.predicate=e,this.thisArg=s,this.source=i,this.index=0,this.thisArg=s||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}class Lt{call(t,e){return e.subscribe(new Ut(t))}}class Ut extends b{constructor(t){super(t),this.hasCompleted=!1,this.hasSubscription=!1}_next(t){this.hasSubscription||(this.hasSubscription=!0,this.add(p(t,new x(this))))}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}class Zt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Gt(t,this.project))}}class Gt extends b{constructor(t,e){super(t),this.project=e,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(t){this.hasSubscription||this.tryNext(t)}tryNext(t){let e;const s=this.index++;try{e=this.project(t,s)}catch(t){return void this.destination.error(t)}this.hasSubscription=!0,this._innerSub(e)}_innerSub(t){const e=new x(this),s=this.destination;s.add(e);const i=p(t,e);i!==e&&s.add(i)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}class Ht{constructor(t,e,s){this.project=t,this.concurrent=e,this.scheduler=s}call(t,e){return e.subscribe(new Jt(t,this.project,this.concurrent,this.scheduler))}}class Jt extends b{constructor(t,e,s,i){super(t),this.project=e,this.concurrent=s,this.scheduler=i,this.index=0,this.active=0,this.hasCompleted=!1,s<Number.POSITIVE_INFINITY&&(this.buffer=[])}static dispatch(t){const{subscriber:e,result:s,value:i,index:n}=t;e.subscribeToProjection(s,i,n)}_next(t){const e=this.destination;if(e.closed)return void this._complete();const s=this.index++;if(this.active<this.concurrent){e.next(t);try{const{project:e}=this,i=e(t,s);if(this.scheduler){const e={subscriber:this,result:i,value:t,index:s};this.destination.add(this.scheduler.schedule(Jt.dispatch,0,e))}else this.subscribeToProjection(i,t,s)}catch(t){e.error(t)}}else this.buffer.push(t)}subscribeToProjection(t,e,s){this.active++,this.destination.add(p(t,new x(this)))}_complete(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this._next(t)}notifyComplete(){const t=this.buffer;this.active--,t&&t.length>0&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()}}class Qt{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Xt(t,this.callback))}}class Xt extends e{constructor(t,e){super(t),this.add(new s(e))}}class $t{constructor(t,e,s,i){this.predicate=t,this.source=e,this.yieldIndex=s,this.thisArg=i}call(t,e){return e.subscribe(new te(t,this.predicate,this.source,this.yieldIndex,this.thisArg))}}class te extends e{constructor(t,e,s,i,n){super(t),this.predicate=e,this.source=s,this.yieldIndex=i,this.thisArg=n,this.index=0}notifyComplete(t){const e=this.destination;e.next(t),e.complete(),this.unsubscribe()}_next(t){const{predicate:e,thisArg:s}=this,i=this.index++;try{e.call(s||this,t,i,this.source)&&this.notifyComplete(this.yieldIndex?i:t)}catch(t){this.destination.error(t)}}_complete(){this.notifyComplete(this.yieldIndex?-1:void 0)}}class ee{call(t,e){return e.subscribe(new se(t))}}class se extends e{_next(t){}}class ie{call(t,e){return e.subscribe(new ne(t))}}class ne extends e{constructor(t){super(t)}notifyComplete(t){const e=this.destination;e.next(t),e.complete()}_next(t){this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function re(t){return function(e){return 0===t?l():e.lift(new oe(t))}}class oe{constructor(t){if(this.total=t,this.total<0)throw new C}call(t,e){return e.subscribe(new ce(t,this.total))}}class ce extends e{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,s=this.total,i=this.count++;if(e.length<s)e.push(t);else{e[i%s]=t}}_complete(){const t=this.destination;let e=this.count;if(e>0){const s=this.count>=this.total?this.total:this.count,i=this.ring;for(let n=0;n<s;n++){const n=e++%s;t.next(i[n])}}t.complete()}}class he{constructor(t){this.value=t}call(t,e){return e.subscribe(new ue(t,this.value))}}class ue extends e{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}class le{call(t,e){return e.subscribe(new ae(t))}}class ae extends e{constructor(t){super(t)}_next(t){this.destination.next(u.createNext(t))}_error(t){const e=this.destination;e.next(u.createError(t)),e.complete()}_complete(){const t=this.destination;t.next(u.createComplete()),t.complete()}}function de(t,e){let s=!1;return arguments.length>=2&&(s=!0),function(i){return i.lift(new fe(t,e,s))}}class fe{constructor(t,e,s=!1){this.accumulator=t,this.seed=e,this.hasSeed=s}call(t,e){return e.subscribe(new be(t,this.accumulator,this.seed,this.hasSeed))}}class be extends e{constructor(t,e,s,i){super(t),this.accumulator=e,this._seed=s,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let s;try{s=this.accumulator(this.seed,t,e)}catch(t){this.destination.error(t)}this.seed=s,this.destination.next(s)}}function pe(t,e){return arguments.length>=2?function(s){return o(de(t,e),re(1),mt(e))(s)}:function(e){return o(de((e,s,i)=>t(e,s,i+1)),re(1))(e)}}class xe{constructor(t,e,s){this.accumulator=t,this.seed=e,this.concurrent=s}call(t,e){return e.subscribe(new we(t,this.accumulator,this.seed,this.concurrent))}}class we extends b{constructor(t,e,s,i){super(t),this.accumulator=e,this.acc=s,this.concurrent=i,this.hasValue=!1,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){if(this.active<this.concurrent){const e=this.index++,s=this.destination;let i;try{const{accumulator:s}=this;i=s(this.acc,t,e)}catch(t){return s.error(t)}this.active++,this._innerSub(i)}else this.buffer.push(t)}_innerSub(t){const e=new x(this),s=this.destination;s.add(e);const i=p(t,e);i!==e&&s.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}notifyNext(t){const{destination:e}=this;this.acc=t,this.hasValue=!0,e.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}function me(t,e){return function(s){let i;if(i="function"==typeof t?t:function(){return t},"function"==typeof e)return s.lift(new _e(i,e));const n=Object.create(s,I);return n.source=s,n.subjectFactory=i,n}}class _e{constructor(t,e){this.subjectFactory=t,this.selector=e}call(t,e){const{selector:s}=this,i=this.subjectFactory(),n=s(i).subscribe(t);return n.add(e.subscribe(i)),n}}class ye{constructor(t){this.nextSources=t}call(t,e){return e.subscribe(new Se(t,this.nextSources))}}class Se extends b{constructor(t,e){super(t),this.destination=t,this.nextSources=e}notifyError(){this.subscribeToNextSource()}notifyComplete(){this.subscribeToNextSource()}_error(t){this.subscribeToNextSource(),this.unsubscribe()}_complete(){this.subscribeToNextSource(),this.unsubscribe()}subscribeToNextSource(){const t=this.nextSources.shift();if(t){const e=new x(this),s=this.destination;s.add(e);const i=p(t,e);i!==e&&s.add(i)}else this.destination.complete()}}class ge{call(t,e){return e.subscribe(new ve(t))}}class ve extends e{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class Ne{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new Ce(t,this.count,this.source))}}class Ce extends e{constructor(t,e,s){super(t),this.count=e,this.source=s}complete(){if(!this.isStopped){const{source:t,count:e}=this;if(0===e)return super.complete();e>-1&&(this.count=e-1),t.subscribe(this._unsubscribeAndRecycle())}}}class Te{constructor(t){this.notifier=t}call(t,e){return e.subscribe(new Ve(t,this.notifier,e))}}class Ve extends b{constructor(t,e,s){super(t),this.notifier=e,this.source=s,this.sourceIsBeingSubscribedTo=!0}notifyNext(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}notifyComplete(){if(!1===this.sourceIsBeingSubscribedTo)return super.complete()}complete(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return super.complete();this._unsubscribeAndRecycle(),this.notifications.next(void 0)}}_unsubscribe(){const{notifications:t,retriesSubscription:e}=this;t&&(t.unsubscribe(),this.notifications=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}_unsubscribeAndRecycle(){const{_unsubscribe:t}=this;return this._unsubscribe=null,super._unsubscribeAndRecycle(),this._unsubscribe=t,this}subscribeToRetries(){let t;this.notifications=new d;try{const{notifier:e}=this;t=e(this.notifications)}catch(t){return super.complete()}this.retries=t,this.retriesSubscription=p(t,new x(this))}}class Ie{constructor(t,e){this.count=t,this.source=e}call(t,e){return e.subscribe(new Ee(t,this.count,this.source))}}class Ee extends e{constructor(t,e,s){super(t),this.count=e,this.source=s}error(t){if(!this.isStopped){const{source:e,count:s}=this;if(0===s)return super.error(t);s>-1&&(this.count=s-1),e.subscribe(this._unsubscribeAndRecycle())}}}class je{constructor(t,e){this.notifier=t,this.source=e}call(t,e){return e.subscribe(new Oe(t,this.notifier,this.source))}}class Oe extends b{constructor(t,e,s){super(t),this.notifier=e,this.source=s}error(t){if(!this.isStopped){let e=this.errors,s=this.retries,i=this.retriesSubscription;if(s)this.errors=void 0,this.retriesSubscription=void 0;else{e=new d;try{const{notifier:t}=this;s=t(e)}catch(t){return super.error(t)}i=p(s,new x(this))}this._unsubscribeAndRecycle(),this.errors=e,this.retries=s,this.retriesSubscription=i,e.next(t)}}_unsubscribe(){const{errors:t,retriesSubscription:e}=this;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:t}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)}}class We{constructor(t){this.notifier=t}call(t,e){const s=new ke(t),i=e.subscribe(s);return i.add(p(this.notifier,new x(s))),i}}class ke extends b{constructor(){super(...arguments),this.hasValue=!1}_next(t){this.value=t,this.hasValue=!0}notifyNext(){this.emitValue()}notifyComplete(){this.emitValue()}emitValue(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}class Ae{constructor(t,e){this.period=t,this.scheduler=e}call(t,e){return e.subscribe(new Be(t,this.period,this.scheduler))}}class Be extends e{constructor(t,e,s){super(t),this.period=e,this.scheduler=s,this.hasValue=!1,this.add(s.schedule(ze,e,{subscriber:this,period:e}))}_next(t){this.lastValue=t,this.hasValue=!0}notifyNext(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}function ze(t){let{subscriber:e,period:s}=t;e.notifyNext(),this.schedule(t,s)}class Fe{constructor(t,e){this.compareTo=t,this.comparator=e}call(t,e){return e.subscribe(new Pe(t,this.compareTo,this.comparator))}}class Pe extends e{constructor(t,e,s){super(t),this.compareTo=e,this.comparator=s,this._a=[],this._b=[],this._oneComplete=!1,this.destination.add(e.subscribe(new Re(t,this)))}_next(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())}_complete(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}checkValues(){const{_a:t,_b:e,comparator:s}=this;for(;t.length>0&&e.length>0;){let i=t.shift(),n=e.shift(),r=!1;try{r=s?s(i,n):i===n}catch(t){this.destination.error(t)}r||this.emit(!1)}}emit(t){const{destination:e}=this;e.next(t),e.complete()}nextB(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())}completeB(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}class Re extends e{constructor(t,e){super(t),this.parent=e}_next(t){this.parent.nextB(t)}_error(t){this.parent.error(t),this.unsubscribe()}_complete(){this.parent.completeB(),this.unsubscribe()}}function De(){return new d}class Me{constructor(t,e){this.predicate=t,this.source=e}call(t,e){return e.subscribe(new qe(t,this.predicate,this.source))}}class qe extends e{constructor(t,e,s){super(t),this.predicate=e,this.source=s,this.seenValue=!1,this.index=0}applySingleValue(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)}_next(t){const e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)}tryNext(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}}_complete(){const t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new N)}}class Ye{constructor(t){this.total=t}call(t,e){return e.subscribe(new Ke(t,this.total))}}class Ke extends e{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}class Le{constructor(t){if(this._skipCount=t,this._skipCount<0)throw new C}call(t,s){return 0===this._skipCount?s.subscribe(new e(t)):s.subscribe(new Ue(t,this._skipCount))}}class Ue extends e{constructor(t,e){super(t),this._skipCount=e,this._count=0,this._ring=new Array(e)}_next(t){const e=this._skipCount,s=this._count++;if(s<e)this._ring[s]=t;else{const i=s%e,n=this._ring,r=n[i];n[i]=t,this.destination.next(r)}}}class Ze{constructor(t){this.notifier=t}call(t,e){return e.subscribe(new Ge(t,this.notifier))}}class Ge extends b{constructor(t,e){super(t),this.hasValue=!1;const s=new x(this);this.add(s),this.innerSubscription=s;const i=p(e,s);i!==s&&(this.add(i),this.innerSubscription=i)}_next(t){this.hasValue&&super._next(t)}notifyNext(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}notifyComplete(){}}class He{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Je(t,this.predicate))}}class Je extends e{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}}}class Qe extends n{constructor(t,e=0,s=A){super(),this.source=t,this.delayTime=e,this.scheduler=s,(!B(e)||e<0)&&(this.delayTime=0),s&&"function"==typeof s.schedule||(this.scheduler=A)}static create(t,e=0,s=A){return new Qe(t,e,s)}static dispatch(t){const{source:e,subscriber:s}=t;return this.add(e.subscribe(s))}_subscribe(t){const e=this.delayTime,s=this.source;return this.scheduler.schedule(Qe.dispatch,e,{source:s,subscriber:t})}}class Xe{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new Qe(e,this.delay,this.scheduler).subscribe(t)}}function $e(t,e){return"function"==typeof e?s=>s.pipe($e((s,i)=>Y(t(s,i)).pipe(q((t,n)=>e(s,t,i,n))))):e=>e.lift(new ts(t))}class ts{constructor(t){this.project=t}call(t,e){return e.subscribe(new es(t,this.project))}}class es extends b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const s=this.index++;try{e=this.project(t,s)}catch(t){return void this.destination.error(t)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const s=new x(this),i=this.destination;i.add(s),this.innerSubscription=p(t,s),this.innerSubscription!==s&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}class ss{constructor(t){this.notifier=t}call(t,e){const s=new is(t),i=p(this.notifier,new x(s));return i&&!s.seenValue?(s.add(i),e.subscribe(s)):s}}class is extends b{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}class ns{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new rs(t,this.predicate,this.inclusive))}}class rs extends e{constructor(t,e,s){super(t),this.predicate=e,this.inclusive=s,this.index=0}_next(t){const e=this.destination;let s;try{s=this.predicate(t,this.index++)}catch(t){return void e.error(t)}this.nextOrComplete(t,s)}nextOrComplete(t,e){const s=this.destination;Boolean(e)?s.next(t):(this.inclusive&&s.next(t),s.complete())}}class os{constructor(t,e,s){this.nextOrObserver=t,this.error=e,this.complete=s}call(t,e){return e.subscribe(new cs(t,this.nextOrObserver,this.error,this.complete))}}class cs extends e{constructor(t,e,s,i){super(t),this._tapNext=z,this._tapError=z,this._tapComplete=z,this._tapError=s||z,this._tapComplete=i||z,c(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||z,this._tapError=e.error||z,this._tapComplete=e.complete||z)}_next(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}const hs={leading:!0,trailing:!1};class us{constructor(t,e,s){this.durationSelector=t,this.leading=e,this.trailing=s}call(t,e){return e.subscribe(new ls(t,this.durationSelector,this.leading,this.trailing))}}class ls extends b{constructor(t,e,s,i){super(t),this.destination=t,this.durationSelector=e,this._leading=s,this._trailing=i,this._hasValue=!1}_next(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))}send(){const{_hasValue:t,_sendValue:e}=this;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0}throttle(t){const e=this.tryDurationSelector(t);e&&this.add(this._throttled=p(e,new x(this)))}tryDurationSelector(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}}throttlingDone(){const{_throttled:t,_trailing:e}=this;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()}notifyNext(){this.throttlingDone()}notifyComplete(){this.throttlingDone()}}class as{constructor(t,e,s,i){this.duration=t,this.scheduler=e,this.leading=s,this.trailing=i}call(t,e){return e.subscribe(new ds(t,this.duration,this.scheduler,this.leading,this.trailing))}}class ds extends e{constructor(t,e,s,i,n){super(t),this.duration=e,this.scheduler=s,this.leading=i,this.trailing=n,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(fs,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function fs(t){const{subscriber:e}=t;e.clearThrottle()}class bs{constructor(t,e){this.value=t,this.interval=e}}function ps(t,e,s=w){return i=>{let n=St(t),r=n?+t-s.now():Math.abs(t);return i.lift(new xs(r,n,e,s))}}class xs{constructor(t,e,s,i){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=s,this.scheduler=i}call(t,e){return e.subscribe(new ws(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class ws extends b{constructor(t,e,s,i,n){super(t),this.absoluteTimeout=e,this.waitFor=s,this.withObservable=i,this.scheduler=n,this.scheduleTimeout()}static dispatchTimeout(t){const{withObservable:e}=t;t._unsubscribeAndRecycle(),t.add(p(e,new x(t)))}scheduleTimeout(){const{action:t}=this;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(ws.dispatchTimeout,this.waitFor,this))}_next(t){this.absoluteTimeout||this.scheduleTimeout(),super._next(t)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}class ms{constructor(t,e){this.value=t,this.timestamp=e}}function _s(t,e,s){return 0===s?[e]:(t.push(e),t)}class ys{constructor(t){this.windowBoundaries=t}call(t,e){const s=new Ss(t),i=e.subscribe(s);return i.closed||s.add(p(this.windowBoundaries,new x(s))),i}}class Ss extends b{constructor(t){super(t),this.window=new d,t.next(this.window)}notifyNext(){this.openWindow()}notifyError(t){this._error(t)}notifyComplete(){this._complete()}_next(t){this.window.next(t)}_error(t){this.window.error(t),this.destination.error(t)}_complete(){this.window.complete(),this.destination.complete()}_unsubscribe(){this.window=null}openWindow(){const t=this.window;t&&t.complete();const e=this.destination,s=this.window=new d;e.next(s)}}class gs{constructor(t,e){this.windowSize=t,this.startWindowEvery=e}call(t,e){return e.subscribe(new vs(t,this.windowSize,this.startWindowEvery))}}class vs extends e{constructor(t,e,s){super(t),this.destination=t,this.windowSize=e,this.startWindowEvery=s,this.windows=[new d],this.count=0,t.next(this.windows[0])}_next(t){const e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,s=this.destination,i=this.windowSize,n=this.windows,r=n.length;for(let e=0;e<r&&!this.closed;e++)n[e].next(t);const o=this.count-i+1;if(o>=0&&o%e==0&&!this.closed&&n.shift().complete(),++this.count%e==0&&!this.closed){const t=new d;n.push(t),s.next(t)}}_error(t){const e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)}_complete(){const t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()}_unsubscribe(){this.count=0,this.windows=null}}class Ns{constructor(t,e,s,i){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=s,this.scheduler=i}call(t,e){return e.subscribe(new Ts(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}class Cs extends d{constructor(){super(...arguments),this._numberOfNextedValues=0}next(t){this._numberOfNextedValues++,super.next(t)}get numberOfNextedValues(){return this._numberOfNextedValues}}class Ts extends e{constructor(t,e,s,i,n){super(t),this.destination=t,this.windowTimeSpan=e,this.windowCreationInterval=s,this.maxWindowSize=i,this.scheduler=n,this.windows=[];const r=this.openWindow();if(null!==s&&s>=0){const t={subscriber:this,window:r,context:null},i={windowTimeSpan:e,windowCreationInterval:s,subscriber:this,scheduler:n};this.add(n.schedule(Es,e,t)),this.add(n.schedule(Is,s,i))}else{const t={subscriber:this,window:r,windowTimeSpan:e};this.add(n.schedule(Vs,e,t))}}_next(t){const e=this.windows,s=e.length;for(let i=0;i<s;i++){const s=e[i];s.closed||(s.next(t),s.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(s))}}_error(t){const e=this.windows;for(;e.length>0;)e.shift().error(t);this.destination.error(t)}_complete(){const t=this.windows;for(;t.length>0;){const e=t.shift();e.closed||e.complete()}this.destination.complete()}openWindow(){const t=new Cs;return this.windows.push(t),this.destination.next(t),t}closeWindow(t){t.complete();const e=this.windows;e.splice(e.indexOf(t),1)}}function Vs(t){const{subscriber:e,windowTimeSpan:s,window:i}=t;i&&e.closeWindow(i),t.window=e.openWindow(),this.schedule(t,s)}function Is(t){const{windowTimeSpan:e,subscriber:s,scheduler:i,windowCreationInterval:n}=t,r=s.openWindow();let o={action:this,subscription:null};const c={subscriber:s,window:r,context:o};o.subscription=i.schedule(Es,e,c),this.add(o.subscription),this.schedule(t,n)}function Es(t){const{subscriber:e,window:s,context:i}=t;i&&i.action&&i.subscription&&i.action.remove(i.subscription),e.closeWindow(s)}class js{constructor(t,e){this.openings=t,this.closingSelector=e}call(t,e){return e.subscribe(new Os(t,this.openings,this.closingSelector))}}class Os extends _{constructor(t,e,s){super(t),this.openings=e,this.closingSelector=s,this.contexts=[],this.add(this.openSubscription=y(this,e,e))}_next(t){const{contexts:e}=this;if(e){const s=e.length;for(let i=0;i<s;i++)e[i].window.next(t)}}_error(t){const{contexts:e}=this;if(this.contexts=null,e){const s=e.length;let i=-1;for(;++i<s;){const s=e[i];s.window.error(t),s.subscription.unsubscribe()}}super._error(t)}_complete(){const{contexts:t}=this;if(this.contexts=null,t){const e=t.length;let s=-1;for(;++s<e;){const e=t[s];e.window.complete(),e.subscription.unsubscribe()}}super._complete()}_unsubscribe(){const{contexts:t}=this;if(this.contexts=null,t){const e=t.length;let s=-1;for(;++s<e;){const e=t[s];e.window.unsubscribe(),e.subscription.unsubscribe()}}}notifyNext(t,e,i,n,r){if(t===this.openings){let t;try{const{closingSelector:s}=this;t=s(e)}catch(t){return this.error(t)}const i=new d,n=new s,r={window:i,subscription:n};this.contexts.push(r);const o=y(this,t,r);o.closed?this.closeWindow(this.contexts.length-1):(o.context=r,n.add(o)),this.destination.next(i)}else this.closeWindow(this.contexts.indexOf(t))}notifyError(t){this.error(t)}notifyComplete(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))}closeWindow(t){if(-1===t)return;const{contexts:e}=this,s=e[t],{window:i,subscription:n}=s;e.splice(t,1),i.complete(),n.unsubscribe()}}class Ws{constructor(t){this.closingSelector=t}call(t,e){return e.subscribe(new ks(t,this.closingSelector))}}class ks extends _{constructor(t,e){super(t),this.destination=t,this.closingSelector=e,this.openWindow()}notifyNext(t,e,s,i,n){this.openWindow(n)}notifyError(t){this._error(t)}notifyComplete(t){this.openWindow(t)}_next(t){this.window.next(t)}_error(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()}_complete(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}unsubscribeClosingNotification(){this.closingNotification&&this.closingNotification.unsubscribe()}openWindow(t=null){t&&(this.remove(t),t.unsubscribe());const e=this.window;e&&e.complete();const s=this.window=new d;let i;this.destination.next(s);try{const{closingSelector:t}=this;i=t()}catch(t){return this.destination.error(t),void this.window.error(t)}this.add(this.closingNotification=y(this,i))}}class As{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Bs(t,this.observables,this.project))}}class Bs extends _{constructor(t,e,s){super(t),this.observables=e,this.project=s,this.toRespond=[];const i=e.length;this.values=new Array(i);for(let t=0;t<i;t++)this.toRespond.push(t);for(let t=0;t<i;t++){let s=e[t];this.add(y(this,s,void 0,t))}}notifyNext(t,e,s){this.values[s]=e;const i=this.toRespond;if(i.length>0){const t=i.indexOf(s);-1!==t&&i.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)}}}}}));
