/* rxjs@6.6.3 */
System.register(["./rxjs-shared.min.js","./rxjs-shared.min3.js","./rxjs-shared.min4.js","./rxjs-shared.min8.js"],(function(e){"use strict";var t,r,n,o,i,s,c,a;return{setters:[function(e){t=e._,r=e.O,n=e.e,o=e.j,i=e.S},function(e){s=e.S,c=e.h},function(e){a=e.R},function(){}],execute:function(){e("webSocket",(function(e){return new f(e)}));var u={url:"",deserializer:function(e){return JSON.parse(e.data)},serializer:function(e){return JSON.stringify(e)}},f=e("WebSocketSubject",function(e){function c(t,n){var i=e.call(this)||this;if(t instanceof r)i.destination=n,i.source=t;else{var c=i._config=o({},u);if(i._output=new s,"string"==typeof t)c.url=t;else for(var f in t)t.hasOwnProperty(f)&&(c[f]=t[f]);if(!c.WebSocketCtor&&WebSocket)c.WebSocketCtor=WebSocket;else if(!c.WebSocketCtor)throw new Error("no WebSocket constructor can be found");i.destination=new a}return i}return t(c,e),c.prototype.lift=function(e){var t=new c(this._config,this.destination);return t.operator=e,t.source=this,t},c.prototype._resetState=function(){this._socket=null,this.source||(this.destination=new a),this._output=new s},c.prototype.multiplex=function(e,t,n){var o=this;return new r((function(r){try{o.next(e())}catch(e){r.error(e)}var i=o.subscribe((function(e){try{n(e)&&r.next(e)}catch(e){r.error(e)}}),(function(e){return r.error(e)}),(function(){return r.complete()}));return function(){try{o.next(t())}catch(e){r.error(e)}i.unsubscribe()}}))},c.prototype._connectSocket=function(){var e=this,t=this._config,r=t.WebSocketCtor,o=t.protocol,s=t.url,c=t.binaryType,u=this._output,f=null;try{f=o?new r(s,o):new r(s),this._socket=f,c&&(this._socket.binaryType=c)}catch(e){return void u.error(e)}var l=new i((function(){e._socket=null,f&&1===f.readyState&&f.close()}));f.onopen=function(t){if(!e._socket)return f.close(),void e._resetState();var r=e._config.openObserver;r&&r.next(t);var o=e.destination;e.destination=n.create((function(t){if(1===f.readyState)try{var r=e._config.serializer;f.send(r(t))}catch(t){e.destination.error(t)}}),(function(t){var r=e._config.closingObserver;r&&r.next(void 0),t&&t.code?f.close(t.code,t.reason):u.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),e._resetState()}),(function(){var t=e._config.closingObserver;t&&t.next(void 0),f.close(),e._resetState()})),o&&o instanceof a&&l.add(o.subscribe(e.destination))},f.onerror=function(t){e._resetState(),u.error(t)},f.onclose=function(t){e._resetState();var r=e._config.closeObserver;r&&r.next(t),t.wasClean?u.complete():u.error(t)},f.onmessage=function(t){try{var r=e._config.deserializer;u.next(r(t))}catch(e){u.error(e)}}},c.prototype._subscribe=function(e){var t=this,r=this.source;return r?r.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add((function(){var e=t._socket;0===t._output.observers.length&&(e&&1===e.readyState&&e.close(),t._resetState())})),e)},c.prototype.unsubscribe=function(){var t=this._socket;t&&1===t.readyState&&t.close(),this._resetState(),e.prototype.unsubscribe.call(this)},c}(c))}}}));
