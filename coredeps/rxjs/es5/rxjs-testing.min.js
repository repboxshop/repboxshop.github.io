/* rxjs@6.6.3 */
System.register(["./rxjs-shared.min.js","./rxjs-shared.min3.js","./rxjs-shared.min8.js","./rxjs-shared.min5.js"],(function(e){"use strict";var r,t,s,a,i,n,o,c;return{setters:[function(e){r=e._,t=e.S,s=e.O},function(e){a=e.S,i=e.N,n=e.a},function(){},function(e){o=e.V,c=e.a}],execute:function(){var u=function(){return function(e,r){void 0===r&&(r=Number.POSITIVE_INFINITY),this.subscribedFrame=e,this.unsubscribedFrame=r}}(),b=function(e){function s(r,s){var a=e.call(this,(function(e){var r=this,s=r.logSubscribedFrame(),a=new t;return a.add(new t((function(){r.logUnsubscribedFrame(s)}))),r.scheduleMessages(e),a}))||this;return a.messages=r,a.subscriptions=[],a.scheduler=s,a}return r(s,e),s.prototype.scheduleMessages=function(e){for(var r=this.messages.length,t=0;t<r;t++){var s=this.messages[t];e.add(this.scheduler.schedule((function(e){var r=e.message,t=e.subscriber;r.notification.observe(t)}),s.frame,{message:s,subscriber:e}))}},s}(s),f=function(e){function s(r,t){var s=e.call(this)||this;return s.messages=r,s.subscriptions=[],s.scheduler=t,s}return r(s,e),s.prototype._subscribe=function(r){var s=this,a=s.logSubscribedFrame(),i=new t;return i.add(new t((function(){s.logUnsubscribedFrame(a)}))),i.add(e.prototype._subscribe.call(this,r)),i},s.prototype.setup=function(){for(var e=this,r=e.messages.length,t=0;t<r;t++)!function(){var r=e.messages[t];e.scheduler.schedule((function(){r.notification.observe(e)}),r.frame)}()},s}(a);e("TestScheduler",function(e){function t(r){var t=e.call(this,c,750)||this;return t.assertDeepEqual=r,t.hotObservables=[],t.coldObservables=[],t.flushTests=[],t.runMode=!1,t}return r(t,e),t.prototype.createTime=function(e){var r=e.indexOf("|");if(-1===r)throw new Error('marble diagram for time should have a completion marker "|"');return r*t.frameTimeFactor},t.prototype.createColdObservable=function(e,r,s){if(-1!==e.indexOf("^"))throw new Error('cold observable cannot have subscription offset "^"');if(-1!==e.indexOf("!"))throw new Error('cold observable cannot have unsubscription marker "!"');var a=t.parseMarbles(e,r,s,void 0,this.runMode),i=new b(a,this);return this.coldObservables.push(i),i},t.prototype.createHotObservable=function(e,r,s){if(-1!==e.indexOf("!"))throw new Error('hot observable cannot have unsubscription marker "!"');var a=t.parseMarbles(e,r,s,void 0,this.runMode),i=new f(a,this);return this.hotObservables.push(i),i},t.prototype.materializeInnerObservable=function(e,r){var t=this,s=[];return e.subscribe((function(e){s.push({frame:t.frame-r,notification:i.createNext(e)})}),(function(e){s.push({frame:t.frame-r,notification:i.createError(e)})}),(function(){s.push({frame:t.frame-r,notification:i.createComplete()})})),s},t.prototype.expectObservable=function(e,r){var a=this;void 0===r&&(r=null);var n,o=[],c={actual:o,ready:!1},u=t.parseMarblesAsSubscriptions(r,this.runMode),b=u.subscribedFrame===Number.POSITIVE_INFINITY?0:u.subscribedFrame,f=u.unsubscribedFrame;this.schedule((function(){n=e.subscribe((function(e){var r=e;e instanceof s&&(r=a.materializeInnerObservable(r,a.frame)),o.push({frame:a.frame,notification:i.createNext(r)})}),(function(e){o.push({frame:a.frame,notification:i.createError(e)})}),(function(){o.push({frame:a.frame,notification:i.createComplete()})}))}),b),f!==Number.POSITIVE_INFINITY&&this.schedule((function(){return n.unsubscribe()}),f),this.flushTests.push(c);var h=this.runMode;return{toBe:function(e,r,s){c.ready=!0,c.expected=t.parseMarbles(e,r,s,!0,h)}}},t.prototype.expectSubscriptions=function(e){var r={actual:e,ready:!1};this.flushTests.push(r);var s=this.runMode;return{toBe:function(e){var a="string"==typeof e?[e]:e;r.ready=!0,r.expected=a.map((function(e){return t.parseMarblesAsSubscriptions(e,s)}))}}},t.prototype.flush=function(){for(var r=this,t=this.hotObservables;t.length>0;)t.shift().setup();e.prototype.flush.call(this),this.flushTests=this.flushTests.filter((function(e){return!e.ready||(r.assertDeepEqual(e.actual,e.expected),!1)}))},t.parseMarblesAsSubscriptions=function(e,r){var t=this;if(void 0===r&&(r=!1),"string"!=typeof e)return new u(Number.POSITIVE_INFINITY);for(var s,a=e.length,i=-1,n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,c=0,b=function(a){var u=c,b=function(e){u+=e*t.frameTimeFactor},h=e[a];switch(h){case" ":r||b(1);break;case"-":b(1);break;case"(":i=c,b(1);break;case")":i=-1,b(1);break;case"^":if(n!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");n=i>-1?i:c,b(1);break;case"!":if(o!==Number.POSITIVE_INFINITY)throw new Error("found a second subscription point '^' in a subscription marble diagram. There can only be one.");o=i>-1?i:c;break;default:if(r&&h.match(/^[0-9]$/)&&(0===a||" "===e[a-1])){var l=e.slice(a).match(/^([0-9]+(?:\.[0-9]+)?)(ms|s|m) /);if(l){a+=l[0].length-1;var m=parseFloat(l[1]),d=void 0;switch(l[2]){case"ms":d=m;break;case"s":d=1e3*m;break;case"m":d=1e3*m*60}b(d/f.frameTimeFactor);break}}throw new Error("there can only be '^' and '!' markers in a subscription marble diagram. Found instead '"+h+"'.")}c=u,s=a},f=this,h=0;h<a;h++)b(h),h=s;return o<0?new u(n):new u(n,o)},t.parseMarbles=function(e,r,t,s,a){var n=this;if(void 0===s&&(s=!1),void 0===a&&(a=!1),-1!==e.indexOf("!"))throw new Error('conventional marble diagrams cannot have the unsubscription marker "!"');for(var o,c=e.length,u=[],f=a?e.replace(/^[ ]+/,"").indexOf("^"):e.indexOf("^"),h=-1===f?0:f*-this.frameTimeFactor,l="object"!=typeof r?function(e){return e}:function(e){return s&&r[e]instanceof b?r[e].messages:r[e]},m=-1,d=function(r){var s=h,c=function(e){s+=e*n.frameTimeFactor},b=void 0,f=e[r];switch(f){case" ":a||c(1);break;case"-":c(1);break;case"(":m=h,c(1);break;case")":m=-1,c(1);break;case"|":b=i.createComplete(),c(1);break;case"^":c(1);break;case"#":b=i.createError(t||"error"),c(1);break;default:if(a&&f.match(/^[0-9]$/)&&(0===r||" "===e[r-1])){var d=e.slice(r).match(/^([0-9]+(?:\.[0-9]+)?)(ms|s|m) /);if(d){r+=d[0].length-1;var v=parseFloat(d[1]),I=void 0;switch(d[2]){case"ms":I=v;break;case"s":I=1e3*v;break;case"m":I=1e3*v*60}c(I/p.frameTimeFactor);break}}b=i.createNext(l(f)),c(1)}b&&u.push({frame:m>-1?m:h,notification:b}),h=s,o=r},p=this,v=0;v<c;v++)d(v),v=o;return u},t.prototype.run=function(e){var r=t.frameTimeFactor,s=this.maxFrames;t.frameTimeFactor=1,this.maxFrames=Number.POSITIVE_INFINITY,this.runMode=!0,n.delegate=this;var a={cold:this.createColdObservable.bind(this),hot:this.createHotObservable.bind(this),flush:this.flush.bind(this),expectObservable:this.expectObservable.bind(this),expectSubscriptions:this.expectSubscriptions.bind(this)};try{var i=e(a);return this.flush(),i}finally{t.frameTimeFactor=r,this.maxFrames=s,this.runMode=!1,n.delegate=void 0}},t}(o))}}}));
