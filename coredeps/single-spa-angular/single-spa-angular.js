System.register(["@angular/common","tslib","@angular/core"],function(t){var e,n,o;return{setters:[function(t){e=t},function(t){n=t},function(t){o=t}],execute:function(){t(function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,(function(e){return t[e]}).bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="iYF8")}({"0S4P":function(t,n){t.exports=e},"17wl":function(t,e){t.exports=n},iYF8:function(t,e,n){"use strict";n.r(e),n.d(e,"getSingleSpaExtraProviders",function(){return l}),n.d(e,"singleSpaAngular",function(){return d}),n.d(e,"\u0275a",function(){return u});var o=n("17wl");function r(t){const e=t();if(!e)throw Error("domElementGetter did not return a valid dom element");return e}function i(t,e){var n,o;return(e=null!==(n=null==e?void 0:e.customProps)&&void 0!==n?n:e).domElement?()=>e.domElement:e.domElementGetter?e.domElementGetter:t.domElementGetter?t.domElementGetter:(o=e.name,function(){const t="single-spa-application:"+o;let e=document.getElementById(t);return e||(e=document.createElement("div"),e.id=t,document.body.appendChild(e)),e})}var s=n("vOrQ"),a=n("0S4P");let u=(()=>{class t extends a["\u0275BrowserPlatformLocation"]{constructor(){super(...arguments),this.skipNextPopState=!1,this.zoneToOnPopStateListenersMap=new Map,this.source=0}destroyApplication(t){const e=[...this.zoneToOnPopStateListenersMap.keys()].find(e=>null!==e.getZoneWith(t)),n=this.zoneToOnPopStateListenersMap.get(e);if(Array.isArray(n))for(const o of n)window.removeEventListener("popstate",o);this.zoneToOnPopStateListenersMap.delete(e)}pushState(t,e,n){this.skipNextPopState=!0,super.pushState(t,e,n)}replaceState(t,e,n){this.skipNextPopState=!0,super.replaceState(t,e,n)}onPopState(t){const e=Zone.current;t=e.wrap(t,""+this.source++);const n=e=>{this.skipNextPopState&&e.singleSpa?this.skipNextPopState=!1:t(e)};this.storeOnPopStateListener(e,n),super.onPopState(n)}storeOnPopStateListener(t,e){const n=this.zoneToOnPopStateListenersMap.get(t)||[];n.push(e),this.zoneToOnPopStateListenersMap.has(t)||this.zoneToOnPopStateListenersMap.set(t,n)}}return t.\u0275fac=function(e){return p(e||t)},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t})();const p=s["\u0275\u0275getInheritedFactory"](u);function l(){return[{provide:u,useClass:u,deps:[[new s.Inject(a.DOCUMENT)]]},{provide:a.PlatformLocation,useExisting:u}]}const c={NgZone:null,bootstrapFunction:null,template:null,Router:void 0,domElementGetter:void 0,AnimationEngine:void 0,updateFunction:()=>Promise.resolve(),bootstrappedModule:null};function d(t){if("object"!=typeof t)throw Error("single-spa-angular requires a configuration object");const e=Object.assign(Object.assign({},c),t);if("function"!=typeof e.bootstrapFunction)throw Error("single-spa-angular must be passed an options.bootstrapFunction");if("string"!=typeof e.template)throw Error("single-spa-angular must be passed options.template string");if(!e.NgZone)throw Error("single-spa-angular must be passed the NgZone option");return e.Router&&!e.NavigationStart&&console.warn("single-spa-angular must be passed the NavigationStart option"),{bootstrap:f.bind(null,e),mount:g.bind(null,e),unmount:m.bind(null,e),update:e.updateFunction}}function f(t,e){return Object(o.__awaiter)(this,void 0,void 0,function*(){"noop"!==t.NgZone&&(t.zoneIdentifier="single-spa-angular:"+(e.name||e.appName),t.NgZone.isInAngularZone=()=>!0===window.Zone.current._properties[t.zoneIdentifier],t.routingEventListener=()=>{t.bootstrappedNgZone.run(()=>{})})})}function g(t,e){return Object(o.__awaiter)(this,void 0,void 0,function*(){!function(t,e){const n=i(t,e);if(!n)throw Error(`Cannot mount angular application '${e.name||e.appName}' without a domElementGetter provided either as an opt or a prop`);r(n).innerHTML=t.template}(t,e);const n=t.bootstrapFunction(e);if(!(n instanceof Promise))throw Error(`single-spa-angular: the options.bootstrapFunction must return a promise, but instead returned a '${typeof n}' that is not a Promise`);const o=yield n;if(!o||"function"!=typeof o.destroy)throw Error("single-spa-angular: the options.bootstrapFunction returned a promise that did not resolve with a valid Angular module. Did you call platformBrowserDynamic().bootstrapModule() correctly?");const s=o.injector.get(u,null),a="noop"!==t.NgZone;if(a&&t.Router&&null===s)throw new Error("\n      single-spa-angular: could not retrieve extra providers from the platform injector. Did you call platformBrowserDynamic(getSingleSpaExtraProviders()).bootstrapModule()?\n    ");const p=t;if(a){const e=o.injector.get(t.NgZone),n=p.zoneIdentifier;null!==s&&(function(t,e){if(!e.NavigationStart)return;const n=t.injector.get(e.Router),o=n.events.subscribe(t=>{if(t instanceof e.NavigationStart){const t=n.getCurrentNavigation();"imperative"!==t.trigger&&(t.extras.skipLocationChange=!0,t.extras.replaceUrl=!1)}});t.onDestroy(()=>{o.unsubscribe()})}(o,t),o.onDestroy(()=>{s.destroyApplication(n)})),p.bootstrappedNgZone=e,p.bootstrappedNgZone._inner._properties[n]=!0,window.addEventListener("single-spa:routing-event",p.routingEventListener)}return p.bootstrappedModule=o,o})}function m(t,e){return Object(o.__awaiter)(this,void 0,void 0,function*(){t.Router&&t.bootstrappedModule.injector.get(t.Router).dispose(),t.routingEventListener&&window.removeEventListener("single-spa:routing-event",t.routingEventListener),t.AnimationEngine&&t.bootstrappedModule.injector.get(t.AnimationEngine)._transitionEngine.flush(),t.bootstrappedModule.destroy(),t.bootstrappedModule=null,function(t,e){if(function(){try{const{"\u0275ivyEnabled":t}=n("vOrQ");return!!t}catch(t){return!1}}()){const n=r(i(t,e));for(;n.firstChild;)n.removeChild(n.firstChild)}}(t,e)})}},vOrQ:function(t,e){t.exports=o}}))}}});